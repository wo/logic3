% --------------------------------------------------------------
% State-transition diagram: Doubles the number of strokes
%   Input:  n strokes (unary)
%   Output: 2n-1 strokes (unary)
%   Strategy: Erase each stroke from left, add two on right
%   This is essentially taken from the open logic project,
%   but I added the -1 at the end.
% --------------------------------------------------------------
\begin{tikzpicture}[node distance=3.5cm, thick]
  %-------------------------------------------------------------
  % States
  %-------------------------------------------------------------
  \node[state]           (q0) {$q_{0}$};
  \node[state, right of=q0]       (q1) {$q_{1}$};
  \node[state, right of=q1]       (q2) {$q_{2}$};
  \node[state, below=2cm of q2] (q3) {$q_{3}$};
  \node[state, left of=q3]        (q4) {$q_{4}$};
  \node[state, left of=q4]        (q5) {$q_{5}$};
  \node[state, left of=q0]        (q6) {$q_{6}$};

  %-------------------------------------------------------------
  % q0: Erase leftmost stroke
  %-------------------------------------------------------------
  \path[->] (q0) edge              node[above] {1: BR} (q1);

  %-------------------------------------------------------------
  % q1: Skip remaining original strokes to find gap
  %-------------------------------------------------------------
  \path[->] (q1) edge[loop above]  node {1: 1R} ();
  \path[->] (q1) edge              node[above] {B: BR} (q2);

  %-------------------------------------------------------------
  % q2: Skip new strokes to find end
  %-------------------------------------------------------------
  \path[->] (q2) edge[loop above]  node {1: 1R} ();
  \path[->] (q2) edge              node[right] {B: 1R} (q3);

  %-------------------------------------------------------------
  % q3: Add second stroke, then start moving back
  %-------------------------------------------------------------
  \path[->] (q3) edge[loop below]  node {B: 1L} ();
  \path[->] (q3) edge              node[below] {1: 1L} (q4);

  %-------------------------------------------------------------
  % q4: Move left through new strokes
  %-------------------------------------------------------------
  \path[->] (q4) edge[loop below]  node {1: 1L} ();
  \path[->] (q4) edge              node[below] {B: BL} (q5);

  %-------------------------------------------------------------
  % q5: Move left through blanks (erased area)
  %-------------------------------------------------------------
  \path[->] (q5) edge[loop below]  node {1: 1L} ();
  \path[->] (q5) edge              node[left]  {B: BR} (q0);

  %-------------------------------------------------------------
  % q5: Add final -1
  %-------------------------------------------------------------
  \path[->] (q0) edge node[above] {B: BR} (q6);
  \path[->] (q6) edge[loop above] node {1: BL} ();
\end{tikzpicture}
% --------------------------------------------------------------
